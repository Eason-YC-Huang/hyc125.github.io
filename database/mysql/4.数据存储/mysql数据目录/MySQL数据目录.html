<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/wolai.css"/><title>MySQL数据目录 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="MySQL数据目录" class="main-title"></div></div></header><article><h2 class="wolai-block"><span class="inline-wrap">数据目录</span></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>数据库和文件系统关系？</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">数据库通过操作系统的文件系统从磁盘上读写数据</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>什么是数据目录？</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">MySQL<span class="jill"></span>服务器在启动时，会到文件系统的某个目录下加载一些数据，之后在运行过程中产生的数据也会存储到这个目录下的某些文件中。这个目录就称为数据目录。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>如何查看数据目录在哪里？</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">MySQL<span class="jill"></span>服务器有个叫</span><span class="inline-wrap"><code>datadir</code></span><span class="inline-wrap">的系统变量，记录数据目录的路径。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">我们可以通过执行命令</span><span class="inline-wrap"><code>SHOW VARIABLES LIKE &#39;datadir&#39;;</code></span><span class="inline-wrap">查看数据目录的路径。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>mysql <span class="token operator">></span> <span class="token constant">SHOW</span> <span class="token constant">VARIABLES</span> <span class="token constant">LIKE</span> <span class="token string">'datadir'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
<span class="token operator">|</span> <span class="token maybe-class-name">Variable_name</span> <span class="token operator">|</span> <span class="token maybe-class-name">Value</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
<span class="token operator">|</span> datadir       <span class="token operator">|</span> <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mysql<span class="token operator">/</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">可以看出我的<span class="jill"></span>MySQL<span class="jill"></span>的数据目录就是</span><span class="inline-wrap"><code>/var/lib/mysql</code></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>数据目录里面的内容</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">Information managed by the MySQL server is stored under a directory known as the data directory. The following list briefly describes the items typically found in the data directory, with cross references for additional information:</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">Data directory subdirectories. Each subdirectory of the data directory is a database directory and corresponds to a database managed by the server. All MySQL installations have certain standard databases:</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">The </span><span class="inline-wrap"><code>mysql</code></span><span class="inline-wrap"> directory corresponds to the </span><span class="inline-wrap"><code>mysql</code></span><span class="inline-wrap"> system schema, which contains information required by the MySQL server as it runs. This database contains data dictionary tables and system tables. See </span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/system-schema.html"><span>Section 5.3, “The mysql System Schema”</span></a></span><span class="inline-wrap">.</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">The </span><span class="inline-wrap"><code>performance_schema</code></span><span class="inline-wrap"> directory corresponds to the Performance Schema, which provides information used to inspect the internal execution of the server at runtime. See </span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema.html"><span>Chapter 27, </span></a></span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema.html"><span><i>MySQL Performance Schema</i></span></a></span><span class="inline-wrap">.</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">The </span><span class="inline-wrap"><code>sys</code></span><span class="inline-wrap"> directory corresponds to the </span><span class="inline-wrap"><code>sys</code></span><span class="inline-wrap"> schema, which provides a set of objects to help interpret Performance Schema information more easily. See </span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/sys-schema.html"><span>Chapter 28, </span></a></span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/sys-schema.html"><span><i>MySQL sys Schema</i></span></a></span><span class="inline-wrap">.</span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap">Other subdirectories correspond to databases created by users or applications.</span></div></div><blockquote class="wolai-block"><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/information-schema.html"><span><code>INFORMATION_SCHEMA</code></span></a></span><span class="inline-wrap"> is a standard database, but its implementation uses no corresponding database directory.</span></blockquote></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">Log files written by the server. See </span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/server-logs.html"><span>Section 5.4, “MySQL Server Logs”</span></a></span><span class="inline-wrap">.</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>InnoDB</code></span><span class="inline-wrap"> tablespace and log files. See </span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-storage-engine.html"><span>Chapter 15, </span></a></span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-storage-engine.html"><span><i>The InnoDB Storage Engine</i></span></a></span><span class="inline-wrap">.</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">Default/autogenerated SSL and RSA certificate and key files. See </span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/creating-ssl-rsa-files.html"><span>Section 6.3.3, “Creating SSL and RSA Certificates and Keys”</span></a></span><span class="inline-wrap">.</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">The server process ID file (while the server is running).</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">The </span><span class="inline-wrap"><code>mysqld-auto.cnf</code></span><span class="inline-wrap"> file that stores persisted global system variable settings. See </span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/set-variable.html"><span>Section 13.7.6.1, “SET Syntax for Variable Assignment”</span></a></span><span class="inline-wrap">.</span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap">Some items in the preceding list can be relocated elsewhere by reconfiguring the server. In addition, the </span><span class="inline-wrap"><a href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_datadir"><span><code>--datadir</code></span></a></span><span class="inline-wrap"> option enables the location of the data directory itself to be changed. For a given MySQL installation, check the server configuration to determine whether items have been moved.</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">我们看一下数据目录里面的内容：</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>$ <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>lib<span class="token operator">/</span>mysql# tree <span class="token operator">-</span><span class="token constant">L</span> <span class="token number">1</span>
<span class="token punctuation">.</span>
<span class="token operator">|</span><span class="token operator">--</span> #ib_16384_0<span class="token punctuation">.</span><span class="token property-access">dblwr</span>
<span class="token operator">|</span><span class="token operator">--</span> #ib_16384_1<span class="token punctuation">.</span><span class="token property-access">dblwr</span>
<span class="token operator">|</span><span class="token operator">--</span> #innodb_temp
<span class="token operator">|</span><span class="token operator">--</span> ab101a3364df<span class="token punctuation">.</span><span class="token property-access">err</span>
<span class="token operator">|</span><span class="token operator">--</span> auto<span class="token punctuation">.</span><span class="token property-access">cnf</span>
<span class="token operator">|</span><span class="token operator">--</span> binlog<span class="token punctuation">.</span><span class="token number">000001</span>
<span class="token operator">|</span><span class="token operator">--</span> binlog<span class="token punctuation">.</span><span class="token number">000002</span>
<span class="token operator">|</span><span class="token operator">--</span> binlog<span class="token punctuation">.</span><span class="token property-access">index</span>
<span class="token operator">|</span><span class="token operator">--</span> ca<span class="token operator">-</span>key<span class="token punctuation">.</span><span class="token property-access">pem</span>
<span class="token operator">|</span><span class="token operator">--</span> ca<span class="token punctuation">.</span><span class="token property-access">pem</span>
<span class="token operator">|</span><span class="token operator">--</span> client<span class="token operator">-</span>cert<span class="token punctuation">.</span><span class="token property-access">pem</span>
<span class="token operator">|</span><span class="token operator">--</span> client<span class="token operator">-</span>key<span class="token punctuation">.</span><span class="token property-access">pem</span>
<span class="token operator">|</span><span class="token operator">--</span> ib_buffer_pool
<span class="token operator">|</span><span class="token operator">--</span> ib_logfile0
<span class="token operator">|</span><span class="token operator">--</span> ib_logfile1
<span class="token operator">|</span><span class="token operator">--</span> ibdata1
<span class="token operator">|</span><span class="token operator">--</span> ibtmp1
<span class="token operator">|</span><span class="token operator">--</span> mysql
<span class="token operator">|</span><span class="token operator">--</span> mysql<span class="token punctuation">.</span><span class="token property-access">ibd</span>
<span class="token operator">|</span><span class="token operator">--</span> performance_schema
<span class="token operator">|</span><span class="token operator">--</span> private_key<span class="token punctuation">.</span><span class="token property-access">pem</span>
<span class="token operator">|</span><span class="token operator">--</span> public_key<span class="token punctuation">.</span><span class="token property-access">pem</span>
<span class="token operator">|</span><span class="token operator">--</span> server<span class="token operator">-</span>cert<span class="token punctuation">.</span><span class="token property-access">pem</span>
<span class="token operator">|</span><span class="token operator">--</span> server<span class="token operator">-</span>key<span class="token punctuation">.</span><span class="token property-access">pem</span>
<span class="token operator">|</span><span class="token operator">--</span> sys
<span class="token operator">|</span><span class="token operator">--</span> undo_001
`<span class="token operator">--</span> undo_002</pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">可以看出，除了</span><span class="inline-wrap"><code>information_schema</code></span><span class="inline-wrap">比较特殊，没有在数据目录创建对应的子目录外</span><span class="inline-wrap">，其它的数据库在数据目录下都有对应的目录。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h2 class="wolai-block"><span class="inline-wrap"><del>表在文件系统中的表示</del></span></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap">我们的数据其实都是以记录的形式插入到表中的。每个表的信息可以分为两种：</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">表结构的定义</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">表中的数据</span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap">表结构指的是表的名称叫什么、表里面有多少列、每列的名称和数据类型是什么、有什么约束和索引、用的是什么字符集以及对应的比较规则等各种信息。为了保存这些信息，</span><span class="inline-wrap">在我们创建表时，无论你用什么存储引擎，MySQL<span class="jill"></span>都会在数据库目录下创建一个跟表名一样的.frm<span class="jill"></span>格式的文件</span><span class="inline-wrap">。</span></div></div><h3 class="wolai-block"><span class="inline-wrap"><del>InnoDB<span class="jill"></span>是如何存储表数据的</del></span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h3 class="wolai-block"><span class="inline-wrap"><del>MyISAM<span class="jill"></span>是如何存储表数据的</del></span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h2 class="wolai-block"><span class="inline-wrap">INFORMATION_SCHEMA</span></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>INFORMATION_SCHEMA</code></span><span class="inline-wrap"> 记录了数据库的元数据以及<span class="jill"></span>MySQL<span class="jill"></span>服务器的信息，例如数据库名、</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">表名、列名以及数据类型，访问权限等等。</span></div></div><div class="wolai-bookmark wolai-block"><a href="https://dev.mysql.com/doc/refman/8.0/en/information-schema.html">MySQL :: MySQL 8.0 Reference Manual :: 26 INFORMATION_SCHEMA Tables</a><div class="info-box"><div class="text-pane"><div data-title="MySQL :: MySQL 8.0 Reference Manual :: 26 INFORMATION_SCHEMA Tables"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://labs.mysql.com/common/themes/sakila/favicon.ico&quot;)"></div><div data-hostname="dev.mysql.com"></div></div></div><div class="preview-pane"></div></div></div><div class="wolai-bookmark wolai-block"><a href="https://www.cnblogs.com/lukcyjane/p/3849354.html">查看mysql库大小，表大小，索引大小 - lukcyjane - 博客园</a><div class="info-box"><div class="text-pane"><div data-title="查看mysql库大小，表大小，索引大小 - lukcyjane - 博客园"></div><div data-desc="说明：通过MySQL的 information_schema 数据库，可查询数据库中每个表占用的空间、表记录的行数；该库中有一个 TABLES 表，这个表主要字段分别是：TABLE_SCHEMA :"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://common.cnblogs.com/favicon.svg&quot;)"></div><div data-hostname="www.cnblogs.com"></div></div></div><div class="preview-pane"></div></div></div><div class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>