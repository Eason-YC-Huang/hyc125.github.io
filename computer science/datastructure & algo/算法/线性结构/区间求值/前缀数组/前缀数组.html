<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../../../../css/wolai.css"/><title>å‰ç¼€æ•°ç»„ - wolai ç¬”è®°</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="font-serif"><header><div class="image"></div><div class="title"><div class="banner"><div data-symbol="â•" class="icon"></div></div><div data-title="å‰ç¼€æ•°ç»„" class="main-title"></div></div></header><article><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>ä»€ä¹ˆæ˜¯å‰ç¼€æ•°ç»„ï¼Ÿ</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">å‰ç¼€æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ </span><span class="inline-wrap"><code>pre[i]</code></span><span class="inline-wrap">è¡¨ç¤ºä¸€ä¸ªæ•°åˆ—çš„å‰</span><span class="inline-wrap"><code>i</code></span><span class="inline-wrap">é¡¹æ“ä½œçš„ç»“æœ</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">å‰ç¼€å’Œæ•°ç»„: </span><span class="inline-wrap"><code>sum[i]</code></span><span class="inline-wrap">è¡¨ç¤ºæ•°åˆ—å‰</span><span class="inline-wrap"><code>i</code></span><span class="inline-wrap">é¡¹æ±‚å’Œçš„ç»“æœ</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">å‰ç¼€å¼‚æˆ–æ•°ç»„: </span><span class="inline-wrap"><code>sum[i]</code></span><span class="inline-wrap">è¡¨ç¤ºæ•°åˆ—å‰</span><span class="inline-wrap"><code>i</code></span><span class="inline-wrap">é¡¹å¼‚æˆ–çš„ç»“æœ</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">......</span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>å‰ç¼€æ•°ç»„çš„æ„ä¹‰ï¼Ÿ</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">å‰ç¼€æ•°ç»„å¸¸ç”¨äº</span><span class="inline-wrap"><code>åŒºé—´æ±‚å€¼</code></span><span class="inline-wrap">ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦æ±‚è§£ä»»æ„ä¸€ä¸ªåŒºé—´çš„å’Œã€æ±‚è§£æœ‰å¤šå°‘ä¸ªåŒºé—´çš„å’Œæ»¡è¶³æ˜¯<span class="jill"></span>k<span class="jill"></span>çš„å€æ•°ï¼Œç­‰ç­‰</span></div></div><h2 class="wolai-block"><span class="inline-wrap">å‰ç¼€å’Œ</span></h2><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">ä¸€ç»´å‰ç¼€å’Œ </span></summary><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> sum<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// sum[lo,hi] = sum[hi+1]-sum[lo]</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>ä¸ºä»€ä¹ˆåœ¨è®¡ç®—å‰ç¼€å’Œæ—¶ä»<span class="jill"></span>i = 1<span class="jill"></span>å¼€å§‹è®¡æ•°å¹¶ä¸”åœ¨æœ€å‰é¢åŠ ä¸€ä¸ª<span class="jill"></span>0ï¼ˆä¹Ÿç§°å“¨å…µï¼‰?</b></span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="çº¯æ–‡æœ¬" class="marker"></div><pre>
arrï¼š<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span> <span class="token punctuation">]</span>ï¼Œæ±‚arr<span class="token punctuation">[</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">]</span>
# <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
å‡è®¾ï¼šä¸åŠ å“¨å…µï¼Œåˆ™å‰ç¼€å’Œæ•°ç»„å¦‚ä¸‹
sumï¼š<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span>
å½“lo<span class="token operator">></span><span class="token number">0</span>æ—¶ï¼Œarr<span class="token punctuation">[</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">]</span><span class="token operator">=</span>sum<span class="token punctuation">[</span>hi<span class="token punctuation">]</span><span class="token operator">-</span>sum<span class="token punctuation">[</span>lo<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
å½“lo<span class="token operator">=</span><span class="token number">0</span>æ—¶ï¼Œarr<span class="token punctuation">[</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">]</span><span class="token operator">=</span>sum<span class="token punctuation">[</span>hi<span class="token punctuation">]</span>
ä¹Ÿå°±æ˜¯è¦åšç‰¹æ®Šåˆ¤æ–­ï¼Œå°±æ¯”è¾ƒéº»çƒ¦
# <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
å‡è®¾ï¼šåŠ å“¨å…µï¼Œåˆ™å‰ç¼€å’Œæ•°ç»„å¦‚ä¸‹
sumï¼š<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span>
arr<span class="token punctuation">[</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">]</span><span class="token operator">=</span>sum<span class="token punctuation">[</span>hi<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>sum<span class="token punctuation">[</span>lo<span class="token punctuation">]</span>
æ— éœ€åšç‰¹æ®Šå¤„ç†
# <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
# æ‰“å°æ‰€æœ‰åŒºé—´çš„å’Œ
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><aside class="bg-cultured wolai-block"><div data-symbol="ğŸ’¥" class="icon"></div><span class="inline-wrap">å‰ç¼€å’Œæ•°ç»„é‡ç‚¹ï¼š
1.åŠ å“¨å…µ
2. </span><span class="inline-wrap"><code>arr[lo,hi]=sum[hi+1]-sum[lo]</code></span></aside></details><details class="wolai-block"><summary><div class="marker placeholder"></div><span class="inline-wrap"><code>nums[lo,hi] = preSum[hi+1] - preSum[lo]</code></span></summary></details><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">äºŒç»´å‰ç¼€å’Œ</span></summary><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> sum<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">NumMatrix</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> m <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">,</span> n <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    sum <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
            sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> sum<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> sum<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sumRegion</span><span class="token punctuation">(</span><span class="token keyword">int</span> row1<span class="token punctuation">,</span> <span class="token keyword">int</span> col1<span class="token punctuation">,</span> <span class="token keyword">int</span> row2<span class="token punctuation">,</span> <span class="token keyword">int</span> col2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> sum<span class="token punctuation">[</span>row2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>col2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> sum<span class="token punctuation">[</span>row2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>col1<span class="token punctuation">]</span> <span class="token operator">-</span> sum<span class="token punctuation">[</span>row1<span class="token punctuation">]</span><span class="token punctuation">[</span>col2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> sum<span class="token punctuation">[</span>row1<span class="token punctuation">]</span><span class="token punctuation">[</span>col1<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details class="wolai-block"><summary><div class="marker placeholder"></div><span class="inline-wrap"><code>preSum[i][j] = matrix[i-1][j-1] + sum[i][j-1] + sum[i-1][j] - sum[i-1][j-1]</code></span></summary></details><div class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>