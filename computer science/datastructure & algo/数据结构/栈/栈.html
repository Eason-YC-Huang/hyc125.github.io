<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/wolai.css"/><title>栈 - wolai 笔记</title><link rel="shortcut icon"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="栈" class="main-title"></div></div></header><article><h2 class="wolai-block"><span class="inline-wrap">栈</span></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h2 class="wolai-block"><span class="inline-wrap">单调栈</span></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap">单调栈就是一个栈，使得每次新元素入栈后，栈内元素单调递增或单调递减。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">单调栈用于处理一种叫做<span class="jill"></span>Next Greater Element<span class="jill"></span>的问题。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">当元素需要出栈的时候，说明它遇到了第一个排在它后面/前面(从前往后遍历/从后往前遍历)且比它大/小(递减单调栈/递增单调栈)的元素。</span></div></div><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap">考虑一个问题，给你一个不重复的整数数组</span><span class="inline-wrap"><code>arr</code></span><span class="inline-wrap">和一个整数</span><span class="inline-wrap"><code>num</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>num</code></span><span class="inline-wrap">是</span><span class="inline-wrap"><code>arr</code></span><span class="inline-wrap">里面的一个元素，找出</span><span class="inline-wrap"><code>num</code></span><span class="inline-wrap">后面第一个比</span><span class="inline-wrap"><code>num</code></span><span class="inline-wrap">大的数字，如果没有，返回-1；</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">办法很简单，遍历</span><span class="inline-wrap"><code>arr</code></span><span class="inline-wrap">找到</span><span class="inline-wrap"><code>num</code></span><span class="inline-wrap">的位置，然后继续往后走，找到第一个大于</span><span class="inline-wrap"><code>num</code></span><span class="inline-wrap">的数字。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">时间复杂度</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap">，空间复杂度</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap">。</span></div></div><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap">现在把问题改一下，给你的是</span><span class="inline-wrap"><code>nums</code></span><span class="inline-wrap">数组，</span><span class="inline-wrap"><code>nums</code></span><span class="inline-wrap">数组是</span><span class="inline-wrap"><code>arr</code></span><span class="inline-wrap">的子集，要求返回一个数组</span><span class="inline-wrap"><code>ans</code></span><span class="inline-wrap">，对应索引存储着下一个更大元素，如果没有更大的元素，就存-1。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">例如</span><span class="inline-wrap"><code>arr=[3,2,4,1]，nums=[2,4]，则<span class="jill"></span>ans=[4,-1]</code></span><span class="inline-wrap">。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">我们可以外部遍历</span><span class="inline-wrap"><code>nums</code></span><span class="inline-wrap">，然后再内部遍历</span><span class="inline-wrap"><code>arr</code></span><span class="inline-wrap">，这样做的话，时间复杂度是</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>∗</mo><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N*M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap">。</span></div></div><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap">我们可以用一个单调栈，求出</span><span class="inline-wrap"><code>arr</code></span><span class="inline-wrap">的</span><span class="inline-wrap"><code>NGE(Next Greater Element)</code></span><span class="inline-wrap">哈希表，然后再利用</span><span class="inline-wrap"><code>NGE</code></span><span class="inline-wrap">哈希表计算</span><span class="inline-wrap"><code>nums</code></span><span class="inline-wrap">的</span><span class="inline-wrap"><code>NGE</code></span><span class="inline-wrap">数组。</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">代码实现</span></summary><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">nextGreaterElement</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums1<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> ngeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 递增单调栈</span>
    <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 假设栈现在是[4,2,1] 左边是栈底，右边是栈顶</span>
        <span class="token comment">// 1</span>
        <span class="token comment">// 2</span>
        <span class="token comment">// 4</span>
        <span class="token comment">// 现在来一个3,那么就要把1和2出栈，并且记录他们的nge是3</span>
        <span class="token comment">// 然后把3入栈</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span>stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>num<span class="token punctuation">)</span><span class="token punctuation">{</span>
            ngeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> ngeMap<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap">练习题</span></div></div><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode-cn.com/problems/next-greater-element-i/"><span>496. Next Greater Element I</span></a></span></summary><div class="wolai-block wolai-text"><div><span class="inline-wrap">其实就是上面的问题</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode-cn.com/problems/next-greater-element-ii/"><span>503. Next Greater Element II</span></a></span></summary><div class="wolai-block wolai-text"><div><span class="inline-wrap">其实就是遍历两次数组</span></div></div></details><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode-cn.com/problems/132-pattern/"><span>456. 132 Pattern</span></a></span></summary><div class="wolai-block wolai-text"><div><span class="inline-wrap">从后往前遍历，维护一个单调递减栈，当栈内元素需要出栈的时候，说明我们找到了<span class="jill"></span>nums[j]，出栈的元素就是<span class="jill"></span>num[k]，继续往前遍历，只要找到<span class="jill"></span>nums[i] &lt; nums[k] 说明有符合<span class="jill"></span>132<span class="jill"></span>模式的组合。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">find132pattern</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> numK <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">;</span>
    <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 当nums[i] &lt; numK,说明numK已经不是Integer.MIN_VALUE,</span>
        <span class="token comment">// 说明numK是从栈里出来的,说明他已经遇到了一个比它大的数</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> numK<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                numK <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> numK<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode-cn.com/problems/longest-well-performing-interval/"><span>1124. Longest Well-Performing Interval</span></a></span></summary><div class="wolai-bookmark wolai-block"><a href="https://leetcode.com/problems/longest-well-performing-interval/discuss/334565/JavaC%2B%2BPython-O(N)-Solution-Life-needs-996-and-669">Loading...</a><div class="info-box"><div class="text-pane"><div data-title="Loading..."></div><div data-desc="Level up your coding skills and quickly land a job. This is the best place to expand your knowledge and get prepared for your next interview."></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://leetcode.com/favicon-192x192.png&quot;)"></div><div data-hostname="leetcode.com"></div></div></div><div class="preview-pane" style="background-image: url(https://leetcode.com/static/images/LeetCode_Sharing.png)"></div></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">按照一天工作时间大于<span class="jill"></span>8<span class="jill"></span>小时(福报日)就加<span class="jill"></span>1<span class="jill"></span>分，否则(摸鱼日)就减<span class="jill"></span>1<span class="jill"></span>分的规则，我们能得到一个得分数组</span><span class="inline-wrap"><code>scores</code></span><span class="inline-wrap">。</span><span class="inline-wrap"><code>scores[i]</code></span><span class="inline-wrap">表示</span><span class="inline-wrap"><code>[0,i]</code></span><span class="inline-wrap">福报日与摸鱼日的天数差。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">当</span><span class="inline-wrap"><code>scores[i]&gt;0</code></span><span class="inline-wrap">，说明</span><span class="inline-wrap"><code>[0,i]</code></span><span class="inline-wrap">福报日多于摸鱼日，则表现良好最长时间段是</span><span class="inline-wrap"><code>[0,i]</code></span><span class="inline-wrap">，结果是</span><span class="inline-wrap"><code>i+1</code></span><span class="inline-wrap">。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">当</span><span class="inline-wrap"><code>scores[i]≤0</code></span><span class="inline-wrap">，假设</span><span class="inline-wrap"><code>scores[i]=-1</code></span><span class="inline-wrap">，因为我们要福报日多于摸鱼日(</span><span class="inline-wrap"><code>scores[i]&gt;0</code></span><span class="inline-wrap">)，也就是要少摸鱼<span class="jill"></span>2<span class="jill"></span>天，唯一办法就是少统计摸鱼的<span class="jill"></span>2<span class="jill"></span>天</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">例如：</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>input <span class="token operator">=</span> <span class="token number">6669699</span>
scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">scores[6]=-1，要使得<span class="jill"></span>scores[6]&gt;0，我们要去掉前面<span class="jill"></span>2<span class="jill"></span>天摸鱼天，所以表现良好最长时间段是[2,6]，结果是<span class="jill"></span>5。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>input <span class="token operator">=</span> <span class="token number">9666_6969_9</span>
scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">scores[8]=-1，要使得<span class="jill"></span>scores[8]&gt;0，要少摸鱼两天，所以我们要去掉前面<span class="jill"></span>3<span class="jill"></span>天，所以表现良好最长时间段是[3,8]，结果是<span class="jill"></span>6。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">longestWPI</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hours<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> score <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> hours<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> seen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        score <span class="token operator">+=</span> hours<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">8</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>score <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ans <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            seen<span class="token punctuation">.</span><span class="token function">putIfAbsent</span><span class="token punctuation">(</span>score<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>seen<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>score <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> i <span class="token operator">-</span> seen<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>score <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">感觉这个描述还不是很清楚，再想想怎么描述</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">拓展思考：和大于<span class="jill"></span>k<span class="jill"></span>的最长子数组</span></div></div></details><details class="wolai-block"><summary><div class="marker placeholder"></div><span class="inline-wrap"><a href="https://leetcode-cn.com/problems/odd-even-jump/"><span>975. Odd Even Jump</span></a></span></summary></details><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode-cn.com/problems/daily-temperatures/"><span>739. Daily Temperatures</span></a></span></summary><div class="wolai-block wolai-text"><div><span class="inline-wrap">典型的<span class="jill"></span>NGE<span class="jill"></span>问题</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">dailyTemperatures</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temperatures<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> len <span class="token operator">=</span> temperatures<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 单调递减栈</span>
    <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> temperatures<span class="token punctuation">[</span>stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> temperatures<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> idx <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ans<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">-</span> idx<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details class="wolai-block"><summary><div class="marker placeholder"></div><span class="inline-wrap"><a href="https://leetcode-cn.com/problems/largest-rectangle-in-histogram/"><span>84. Largest Rectangle in Histogram</span></a></span></summary></details><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>