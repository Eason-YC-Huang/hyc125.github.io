<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/wolai.css"/><title>概率 - wolai 笔记</title><link rel="shortcut icon"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="概率" class="main-title"></div></div></header><article><div class="wolai-block wolai-text"><div><span class="inline-wrap">讲一个万能的方法，可以无脑等概率生成任何数！</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">讲一个万能的方法，可以无脑等概率生成任何数！</span></div></div><ol class="wolai-block"><li><div class="marker"></div><span class="inline-wrap">下面将需要生成的随机数中最大值记为<span class="jill"></span>n</span></li><li><div class="marker"></div><span class="inline-wrap">先去生成一个等概率产生<span class="jill"></span>0<span class="jill"></span>和<span class="jill"></span>1<span class="jill"></span>的方法：</span><span class="inline-wrap"><code>rand2()</code></span><span class="inline-wrap"> 。</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">不要去纠结为什么返回值不是<span class="jill"></span>1<span class="jill"></span>和<span class="jill"></span>2，因为方便二进制位运算。</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">实现：调用 </span><span class="inline-wrap"><code>rand7()</code></span><span class="inline-wrap"> ，</span><span class="inline-wrap"><code>1,2,3</code></span><span class="inline-wrap"> 返回<span class="jill"></span>0，</span><span class="inline-wrap"><code>4,5,6</code></span><span class="inline-wrap"> 返回<span class="jill"></span>1，</span><span class="inline-wrap"><code>7</code></span><span class="inline-wrap"> 重来。</span></li></ul></li><li><div class="marker"></div><span class="inline-wrap">将<span class="jill"></span>n<span class="jill"></span>转为二进制，看看是几位的二进制。</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">例如本题的 </span><span class="inline-wrap"><code>10</code></span><span class="inline-wrap"> ，二进制为 </span><span class="inline-wrap"><code>1010</code></span><span class="inline-wrap"> 。也就是说仅仅需要<span class="jill"></span>4<span class="jill"></span>位二进制数就能表示<span class="jill"></span>10<span class="jill"></span>进制的<span class="jill"></span>10。 用这个 </span><span class="inline-wrap"><code>rand2()</code></span><span class="inline-wrap"> 方法生成<span class="jill"></span>n<span class="jill"></span>的每个二进制位。</span></li></ul></li><li><div class="marker"></div><span class="inline-wrap">创建一个数为 </span><span class="inline-wrap"><code>rand2()</code></span><span class="inline-wrap"> ，每次左移一位再加 </span><span class="inline-wrap"><code>rand2()</code></span><span class="inline-wrap"> 。</span></li><li><div class="marker"></div><span class="inline-wrap">如果出现不符合题意的情况，再次调用 </span><span class="inline-wrap"><code>rand10()</code></span><span class="inline-wrap"> 。</span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">例如如上步骤可能生成 </span><span class="inline-wrap"><code>0000</code></span><span class="inline-wrap"> , </span><span class="inline-wrap"><code>1011</code></span><span class="inline-wrap"> 、…… 、</span><span class="inline-wrap"><code>1111</code></span><span class="inline-wrap"> （分别为<span class="jill"></span>0,11、 …… 、15），显然这些都是不在[1,10]中的正整数，所以只能重新生成。</span></li></ul></li></ol><div class="wolai-block wolai-text"><div><span class="inline-wrap">【重难点】</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">主要理解二进制的每一位出现<span class="jill"></span>0<span class="jill"></span>和<span class="jill"></span>1<span class="jill"></span>的可能性都是相同的，所以能生成的每一个数概率都是相同的。</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre>  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rand10</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">rand2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          ans <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          ans <span class="token operator">^=</span> <span class="token function">rand2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>ans <span class="token operator">&lt;=</span> <span class="token number">10</span> <span class="token operator">&amp;&amp;</span> ans <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> ans <span class="token operator">:</span> <span class="token function">rand10</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rand2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token function">rand7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> ans <span class="token operator">==</span> <span class="token number">7</span> <span class="token operator">?</span> <span class="token function">rand2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> ans <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">【拓展思考】</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">怎么用一个不等概率生成<span class="jill"></span>0<span class="jill"></span>和<span class="jill"></span>1<span class="jill"></span>的方法 </span><span class="inline-wrap"><code>rand()</code></span><span class="inline-wrap"> 等概率的生成任意数？</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">注：只是生成<span class="jill"></span>0<span class="jill"></span>和<span class="jill"></span>1<span class="jill"></span>的概率不相等，但是每次生成<span class="jill"></span>0<span class="jill"></span>或<span class="jill"></span>1<span class="jill"></span>的概率永远是恒定的。（例如生成<span class="jill"></span>0<span class="jill"></span>概率永远为<span class="jill"></span>10%，生成<span class="jill"></span>1<span class="jill"></span>概率永远为<span class="jill"></span>90%）</span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap">【思路】</span></div></div><ol class="wolai-block"><li><div class="marker"></div><span class="inline-wrap">同样是用二进制生成一个能等概率生成<span class="jill"></span>0<span class="jill"></span>和<span class="jill"></span>1<span class="jill"></span>的方法 </span><span class="inline-wrap"><code>rand2()</code></span><span class="inline-wrap"> 。</span></li><li><div class="marker"></div><span class="inline-wrap">用 </span><span class="inline-wrap"><code>rand()</code></span><span class="inline-wrap"> 方法生成的二进制为 </span><span class="inline-wrap"><code>01</code></span><span class="inline-wrap"> 或 </span><span class="inline-wrap"><code>10</code></span><span class="inline-wrap"> 分别表示<span class="jill"></span>0<span class="jill"></span>和<span class="jill"></span>1，生成的二进制为 </span><span class="inline-wrap"><code>00</code></span><span class="inline-wrap"> 或 </span><span class="inline-wrap"><code>11</code></span><span class="inline-wrap"> 重复上述过程。 其余同本题步骤。</span></li></ol><div class="wolai-block wolai-text"><div><span class="inline-wrap">【重难点】</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">主要理解出现的<span class="jill"></span>4<span class="jill"></span>种情况中只有 </span><span class="inline-wrap"><code>01</code></span><span class="inline-wrap"> 或 </span><span class="inline-wrap"><code>10</code></span><span class="inline-wrap"> 两种情况是等概率的，其余两种情况应该要舍弃。</span></div></div><div class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>