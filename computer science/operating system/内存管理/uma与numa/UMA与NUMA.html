<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/wolai.css"/><title>UMA与NUMA - wolai 笔记</title><link rel="shortcut icon"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="UMA与NUMA" class="main-title"></div></div></header><article><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap">linux<span class="jill"></span>内核深度解析</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">（1）非一致内存访问（Non-Uniform Memory Access, NUMA）：指内存被划分成多个内存节点的多处理器系统，访问一个内存节点花费的时间取决于处理器和内存节点的距离。每个处理器有一个本地内存节点，处理器访问本地内存节点的速度比访问其他内存节点的速度快。NUMA<span class="jill"></span>是中高端服务器的主流体系结构。（2）对称多处理器（Symmetric Multi-Processor, SMP）：即一致内存访问（Uniform Memory Access, UMA），所有处理器访问内存花费的时间是相同的。每个处理器的地位是平等的，仅在内核初始化的时候不平等：“0<span class="jill"></span>号处理器作为引导处理器负责初始化内核，其他处理器等待内核初始化完成。”在实际应用中可以采用混合体系结构，在<span class="jill"></span>NUMA<span class="jill"></span>节点内部使用<span class="jill"></span>SMP<span class="jill"></span>体系结构。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">（1）非一致内存访问（Non-Uniform Memory Access, NUMA）：指内存被划分成多个内存节点的多处理器系统，访问一个内存节点花费的时间取决于处理器和内存节点的距离。每个处理器有一个本地内存节点，处理器访问本地内存节点的速度比访问其他内存节点的速度快。NUMA<span class="jill"></span>是中高端服务器的主流体系结构。（2）对称多处理器（Symmetric Multi-Processor, SMP）：即一致内存访问（Uniform Memory Access, UMA），所有处理器访问内存花费的时间是相同的。每个处理器的地位是平等的，仅在内核初始化的时候不平等：“0<span class="jill"></span>号处理器作为引导处理器负责初始化内核，其他处理器等待内核初始化完成。”在实际应用中可以采用混合体系结构，在<span class="jill"></span>NUMA<span class="jill"></span>节点内部使用<span class="jill"></span>SMP<span class="jill"></span>体系结构。</span></div></div><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>阅读目录</b></span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label0"><span>1. 3<span class="jill"></span>种系统架构与<span class="jill"></span>2<span class="jill"></span>种存储器共享方式</span></a></span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label0_0"><span>1.1 架构概述</span></a></span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label0_1"><span>1.2 SMP(Symmetric Multi-Processor)</span></a></span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label0_2"><span>1.3 NUMA(Non-Uniform Memory Access)</span></a></span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label0_3"><span>1.4 MPP(Massive Parallel Processing)</span></a></span></li></ul></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label1"><span>2 三种体系架构之间的差异</span></a></span><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label1_0"><span>2.1 NUMA、MPP、SMP<span class="jill"></span>之间性能的区别</span></a></span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label1_1"><span>2.2 NUMA、MPP、SMP<span class="jill"></span>之间扩展的区别</span></a></span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label1_2"><span>2.3 MPP<span class="jill"></span>和<span class="jill"></span>SMP、NUMA<span class="jill"></span>应用之间的区别</span></a></span></li></ul></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_label2"><span>3 总结</span></a></span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>正文</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_labelTop"><span>回到顶部</span></a></span></div></div><h2 class="wolai-block"><span class="inline-wrap">1. 3<span class="jill"></span>种系统架构与<span class="jill"></span>2<span class="jill"></span>种存储器共享方式</span></h2><h3 class="wolai-block"><span class="inline-wrap">1.1 架构概述</span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap">从系统架构来看，目前的商用服务器大体可以分为三类</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">对称多处理器结构(SMP：Symmetric Multi-Processor)</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">非一致存储访问结构(NUMA：Non-Uniform Memory Access)</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">海量并行处理结构(MPP：Massive Parallel Processing)。</span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap">共享存储型多处理机有两种模型</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">均匀存储器存取（Uniform-Memory-Access，简称<span class="jill"></span>UMA）模型</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">非均匀存储器存取（Nonuniform-Memory-Access，简称<span class="jill"></span>NUMA）模型</span></li></ul><div class="wolai-block wolai-text"><div><span class="inline-wrap">而我们后面所提到的<span class="jill"></span>COMA<span class="jill"></span>和<span class="jill"></span>ccNUMA<span class="jill"></span>都是<span class="jill"></span>NUMA<span class="jill"></span>结构的改进</span></div></div><h3 class="wolai-block"><span class="inline-wrap">1.2 SMP(Symmetric Multi-Processor)</span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap">所谓对称多处理器结构，是指服务器中多个<span class="jill"></span>CPU<span class="jill"></span>对称工作，无主次或从属关系。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">各<span class="jill"></span>CPU<span class="jill"></span>共享相同的物理内存，每个 CPU<span class="jill"></span>访问内存中的任何地址所需时间是相同的，因此<span class="jill"></span>SMP<span class="jill"></span>也被称为</span><span class="inline-wrap"><b>一致存储器访问结构(UMA：Uniform Memory Access)</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">对<span class="jill"></span>SMP<span class="jill"></span>服务器进行扩展的方式包括增加内存、使用更快的<span class="jill"></span>CPU、增加<span class="jill"></span>CPU、扩充<span class="jill"></span>I/O(槽口数与总线数)以及添加更多的外部设备(通常是磁盘存储)。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">SMP<span class="jill"></span>服务器的主要特征是共享，系统中所有资源(CPU、内存、I/O<span class="jill"></span>等)都是共享的。也正是由于这种特征，导致了<span class="jill"></span>SMP<span class="jill"></span>服务器的主要问题，那就是它的扩展能力非常有限。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">对于<span class="jill"></span>SMP<span class="jill"></span>服务器而言，每一个共享的环节都可能造成<span class="jill"></span>SMP<span class="jill"></span>服务器扩展时的瓶颈，而最受限制的则是内存。由于每个<span class="jill"></span>CPU<span class="jill"></span>必须通过相同的内存总线访问相同的内存资源，因此随着<span class="jill"></span>CPU<span class="jill"></span>数量的增加，内存访问冲突将迅速增加，最终会造成<span class="jill"></span>CPU<span class="jill"></span>资源的浪费，使<span class="jill"></span>CPU<span class="jill"></span>性能的有效性大大降低。实验证明，SMP<span class="jill"></span>服务器<span class="jill"></span>CPU<span class="jill"></span>利用率最好的情况是<span class="jill"></span>2<span class="jill"></span>至<span class="jill"></span>4<span class="jill"></span>个<span class="jill"></span>CPU</span></div></div><div class="wolai-block wolai-center"><figure><img src="https://img2018.cnblogs.com/blog/811006/201811/811006-20181118230038296-1092187507.png" style="width: 228px"/></figure></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">图中，物理存储器被所有处理机均匀共享。所有处理机对所有存储字具有相同的存取时间，这就是为什么称它为均匀存储器存取的原因。每台处理机可以有私用高速缓存,外围设备也以一定形式共享</span></div></div><h3 class="wolai-block"><span class="inline-wrap">1.3 NUMA(Non-Uniform Memory Access)</span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap">由于<span class="jill"></span>SMP<span class="jill"></span>在扩展能力上的限制，人们开始探究如何进行有效地扩展从而构建大型系统的技术，NUMA<span class="jill"></span>就是这种努力下的结果之一</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">利用<span class="jill"></span>NUMA<span class="jill"></span>技术，可以把几十个<span class="jill"></span>CPU(甚至上百个<span class="jill"></span>CPU)组合在一个服务器内.</span></div></div><div class="wolai-block wolai-center"><figure><img src="https://img2018.cnblogs.com/blog/811006/201811/811006-20181118230257323-316731109.png" style="width: 443px"/></figure></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">NUMA<span class="jill"></span>多处理机模型如图所示，其访问时间随存储字的位置不同而变化。其共享存储器物理上是分布在所有处理机的本地存储器上。所有本地存储器的集合组成了全局地址空间，可被所有的处理机访问。处理机访问本地存储器是比较快的，但访问属于另一台处理机的远程存储器则比较慢，因为通过互连网络会产生附加时延。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">NUMA<span class="jill"></span>服务器的基本特征是具有多个<span class="jill"></span>CPU<span class="jill"></span>模块，每个<span class="jill"></span>CPU<span class="jill"></span>模块由多个<span class="jill"></span>CPU(如<span class="jill"></span>4<span class="jill"></span>个)组成，并且具有独立的本地内存、I/O<span class="jill"></span>槽口等。</span></div></div><div class="wolai-block wolai-center"><figure><img src="https://img2018.cnblogs.com/blog/811006/201811/811006-20181118230755747-2091804743.png" style="width: 400px"/></figure></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">由于其节点之间可以通过互联模块(如称为<span class="jill"></span>Crossbar Switch)进行连接和信息交互，因此每个<span class="jill"></span>CPU<span class="jill"></span>可以访问整个系统的内存(这是<span class="jill"></span>NUMA<span class="jill"></span>系统与<span class="jill"></span>MPP<span class="jill"></span>系统的重要差别)。显然，访问本地内存的速度将远远高于访问远地内存(系统内其它节点的内存)的速度，这也是非一致存储访问<span class="jill"></span>NUMA<span class="jill"></span>的由来。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">由于这个特点，为了更好地发挥系统性能，开发应用程序时需要尽量减少不同<span class="jill"></span>CPU<span class="jill"></span>模块之间的信息交互。利用<span class="jill"></span>NUMA<span class="jill"></span>技术，可以较好地解决原来<span class="jill"></span>SMP<span class="jill"></span>系统的扩展问题，在一个物理服务器内可以支持上百个<span class="jill"></span>CPU。比较典型的<span class="jill"></span>NUMA<span class="jill"></span>服务器的例子包括<span class="jill"></span>HP<span class="jill"></span>的<span class="jill"></span>Superdome、SUN15K、IBMp690<span class="jill"></span>等。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">但<span class="jill"></span>NUMA<span class="jill"></span>技术同样有一定缺陷，由于访问远地内存的延时远远超过本地内存，因此当<span class="jill"></span>CPU<span class="jill"></span>数量增加时，系统性能无法线性增加。如<span class="jill"></span>HP<span class="jill"></span>公司发布<span class="jill"></span>Superdome<span class="jill"></span>服务器时，曾公布了它与<span class="jill"></span>HP<span class="jill"></span>其它<span class="jill"></span>UNIX<span class="jill"></span>服务器的相对性能值，结果发现，64<span class="jill"></span>路<span class="jill"></span>CPU<span class="jill"></span>的<span class="jill"></span>Superdome (NUMA<span class="jill"></span>结构)的相对性能值是<span class="jill"></span>20，而<span class="jill"></span>8<span class="jill"></span>路<span class="jill"></span>N4000(共享的<span class="jill"></span>SMP<span class="jill"></span>结构)的相对性能值是<span class="jill"></span>6.3. 从这个结果可以看到，8<span class="jill"></span>倍数量的<span class="jill"></span>CPU<span class="jill"></span>换来的只是<span class="jill"></span>3<span class="jill"></span>倍性能的提升.</span></div></div><h3 class="wolai-block"><span class="inline-wrap">1.4 MPP(Massive Parallel Processing)</span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap">和<span class="jill"></span>NUMA<span class="jill"></span>不同，MPP<span class="jill"></span>提供了另外一种进行系统扩展的方式，它由多个<span class="jill"></span>SMP<span class="jill"></span>服务器通过一定的节点互联网络进行连接，协同工作，完成相同的任务，从用户的角度来看是一个服务器系统。其基本特征是由多个<span class="jill"></span>SMP<span class="jill"></span>服务器(每个<span class="jill"></span>SMP<span class="jill"></span>服务器称节点)通过节点互联网络连接而成，每个节点只访问自己的本地资源(内存、存储等)，是一种完全无共享(Share Nothing)结构，因而扩展能力最好，理论上其扩展无限制，目前的技术可实现<span class="jill"></span>512<span class="jill"></span>个节点互联，数千个<span class="jill"></span>CPU。目前业界对节点互联网络暂无标准，如 NCR<span class="jill"></span>的<span class="jill"></span>Bynet，IBM<span class="jill"></span>的<span class="jill"></span>SPSwitch，它们都采用了不同的内部实现机制。但节点互联网仅供<span class="jill"></span>MPP<span class="jill"></span>服务器内部使用，对用户而言是透明的。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">在<span class="jill"></span>MPP<span class="jill"></span>系统中，每个<span class="jill"></span>SMP<span class="jill"></span>节点也可以运行自己的操作系统、数据库等。但和<span class="jill"></span>NUMA<span class="jill"></span>不同的是，它不存在异地内存访问的问题。换言之，每个节点内的<span class="jill"></span>CPU<span class="jill"></span>不能访问另一个节点的内存。节点之间的信息交互是通过节点互联网络实现的，这个过程一般称为数据重分配(Data Redistribution)。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">但是<span class="jill"></span>MPP<span class="jill"></span>服务器需要一种复杂的机制来调度和平衡各个节点的负载和并行处理过程。目前一些基于<span class="jill"></span>MPP<span class="jill"></span>技术的服务器往往通过系统级软件(如数据库)来屏蔽这种复杂性。举例来说，NCR<span class="jill"></span>的<span class="jill"></span>Teradata<span class="jill"></span>就是基于<span class="jill"></span>MPP<span class="jill"></span>技术的一个关系数据库软件，基于此数据库来开发应用时，不管后台服务器由多少个节点组成，开发人员所面对的都是同一个数据库系统，而不需要考虑如何调度其中某几个节点的负载。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_labelTop"><span>回到顶部</span></a></span></div></div><h2 class="wolai-block"><span class="inline-wrap">2 三种体系架构之间的差异</span></h2><h3 class="wolai-block"><span class="inline-wrap">2.1 NUMA、MPP、SMP<span class="jill"></span>之间性能的区别</span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap">NUMA<span class="jill"></span>的节点互联机制是在同一个物理服务器内部实现的，当某个<span class="jill"></span>CPU<span class="jill"></span>需要进行远地内存访问时，它必须等待，这也是<span class="jill"></span>NUMA<span class="jill"></span>服务器无法实现<span class="jill"></span>CPU<span class="jill"></span>增加时性能线性扩展。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">MPP<span class="jill"></span>的节点互联机制是在不同的<span class="jill"></span>SMP<span class="jill"></span>服务器外部通过<span class="jill"></span>I/O<span class="jill"></span>实现的，每个节点只访问本地内存和存储，节点之间的信息交互与节点本身的处理是并行进行的。因此<span class="jill"></span>MPP<span class="jill"></span>在增加节点时性能基本上可以实现线性扩展。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">SMP<span class="jill"></span>所有的<span class="jill"></span>CPU<span class="jill"></span>资源是共享的，因此完全实现线性扩展。</span></div></div><h3 class="wolai-block"><span class="inline-wrap">2.2 NUMA、MPP、SMP<span class="jill"></span>之间扩展的区别</span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap">NUMA<span class="jill"></span>理论上可以无限扩展，目前技术比较成熟的能够支持上百个<span class="jill"></span>CPU<span class="jill"></span>进行扩展。如<span class="jill"></span>HP<span class="jill"></span>的<span class="jill"></span>SUPERDOME。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">MPP<span class="jill"></span>理论上也可以实现无限扩展，目前技术比较成熟的能够支持<span class="jill"></span>512<span class="jill"></span>个节点，数千个<span class="jill"></span>CPU<span class="jill"></span>进行扩展。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">SMP<span class="jill"></span>扩展能力很差，目前<span class="jill"></span>2<span class="jill"></span>个到<span class="jill"></span>4<span class="jill"></span>个<span class="jill"></span>CPU<span class="jill"></span>的利用率最好，但是<span class="jill"></span>IBM<span class="jill"></span>的<span class="jill"></span>BOOK<span class="jill"></span>技术，能够将<span class="jill"></span>CPU<span class="jill"></span>扩展到<span class="jill"></span>8<span class="jill"></span>个。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">MPP<span class="jill"></span>是由多个<span class="jill"></span>SMP<span class="jill"></span>构成，多个<span class="jill"></span>SMP<span class="jill"></span>服务器通过一定的节点互联网络进行连接，协同工作，完成相同的任务。</span></div></div><h3 class="wolai-block"><span class="inline-wrap">2.3 MPP<span class="jill"></span>和<span class="jill"></span>SMP、NUMA<span class="jill"></span>应用之间的区别</span></h3><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>MPP<span class="jill"></span>的优势</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">MPP<span class="jill"></span>系统不共享资源，因此对它而言，资源比<span class="jill"></span>SMP<span class="jill"></span>要多，当需要处理的事务达到一定规模时，MPP<span class="jill"></span>的效率要比<span class="jill"></span>SMP<span class="jill"></span>好。由于<span class="jill"></span>MPP<span class="jill"></span>系统因为要在不同处理单元之间传送信息，在通讯时间少的时候，那<span class="jill"></span>MPP<span class="jill"></span>系统可以充分发挥资源的优势，达到高效率。也就是说：操作相互之间没有什么关系，处理单元之间需要进行的通信比较少，那采用<span class="jill"></span>MPP<span class="jill"></span>系统就要好。因此，MPP<span class="jill"></span>系统在决策支持和数据挖掘方面显示了优势。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>SMP<span class="jill"></span>的优势</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">MPP<span class="jill"></span>系统因为要在不同处理单元之间传送信息，所以它的效率要比<span class="jill"></span>SMP<span class="jill"></span>要差一点。在通讯时间多的时候，那<span class="jill"></span>MPP<span class="jill"></span>系统可以充分发挥资源的优势。因此当前使用的<span class="jill"></span>OTLP<span class="jill"></span>程序中，用户访问一个中心数据库，如果采用<span class="jill"></span>SMP<span class="jill"></span>系统结构，它的效率要比采用<span class="jill"></span>MPP<span class="jill"></span>结构要快得多。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>NUMA<span class="jill"></span>架构的优势</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">NUMA<span class="jill"></span>架构来看，它可以在一个物理服务器内集成许多<span class="jill"></span>CPU，使系统具有较高的事务处理能力，由于远地内存访问时延远长于本地内存访问，因此需要尽量减少不同<span class="jill"></span>CPU<span class="jill"></span>模块之间的数据交互。显然，NUMA<span class="jill"></span>架构更适用于<span class="jill"></span>OLTP<span class="jill"></span>事务处理环境，当用于数据仓库环境时，由于大量复杂的数据处理必然导致大量的数据交互，将使<span class="jill"></span>CPU<span class="jill"></span>的利用率大大降低。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><a href="https://www.cnblogs.com/linhaostudy/p/9980383.html#_labelTop"><span>回到顶部</span></a></span></div></div><h2 class="wolai-block"><span class="inline-wrap">3 总结</span></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap">传统的多核运算是使用<span class="jill"></span>SMP(Symmetric Multi-Processor )模式：将多个处理器与一个集中的存储器和<span class="jill"></span>I/O<span class="jill"></span>总线相连。所有处理器只能访问同一个物理存储器，因此<span class="jill"></span>SMP<span class="jill"></span>系统有时也被称为一致存储器访问(UMA)结构体系，一致性意指无论在什么时候，处理器只能为内存的每个数据保持或共享唯一一个数值。很显然，SMP<span class="jill"></span>的缺点是可伸缩性有限，因为在存储器和<span class="jill"></span>I/O<span class="jill"></span>接口达到饱和的时候，增加处理器并不能获得更高的性能，与之相对应的有<span class="jill"></span>AMP<span class="jill"></span>架构，不同核之间有主从关系，如一个核控制另外一个核的业务，可以理解为多核系统中控制平面和数据平面。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">NUMA<span class="jill"></span>模式是一种分布式存储器访问方式，处理器可以同时访问不同的存储器地址，大幅度提高并行性。 NUMA<span class="jill"></span>模式下，处理器被划分成多个”节点”（node）， 每个节点被分配有的本地存储器空间。 所有节点中的处理器都可以访问全部的系统物理存储器，但是访问本节点内的存储器所需要的时间，比访问某些远程节点内的存储器所花的时间要少得多。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">NUMA 的主要优点是伸缩性。NUMA 体系结构在设计上已超越了 SMP 体系结构在伸缩性上的限制。通过 SMP，所有的内存访问都传递到相同的共享内存总线。这种方式非常适用于 CPU 数量相对较少的情况，但不适用于具有几十个甚至几百个 CPU 的情况，因为这些 CPU 会相互竞争对共享内存总线的访问。NUMA 通过限制任何一条内存总线上的 CPU 数量并依靠高速互连来连接各个节点，从而缓解了这些瓶颈状况。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>名词解释</b></span></div></div><div class="wolai-block wolai-simple-table"><table><thead><tr><th style="width: 100px"><span class="inline-wrap">概念</span></th><th style="width: 644px"><span class="inline-wrap">描述</span></th></tr></thead><tbody><tr><td><span class="inline-wrap">SMP</span></td><td><span class="inline-wrap">共享存储型多处理机(Shared Memory Multi-Processors), 也称为对称型多处理机（Symmetric Multi-Processors)</span></td></tr><tr><td><span class="inline-wrap">UMA</span></td><td><span class="inline-wrap">称为均匀存储器存取（Uniform-Memory-Access)</span></td></tr><tr><td><span class="inline-wrap">NUMA</span></td><td><span class="inline-wrap">非均匀存储器存取（Nonuniform-Memory-Access）</span></td></tr></tbody></table></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">UMA</span></div></div><blockquote class="wolai-block"><span class="inline-wrap">物理存储器被所有处理机均匀共享。所有处理机对所有存储字具有相同的存取时间，这就是为什么称它为均匀存储器存取的原因。每台处理机可以有私用高速缓存,外围设备也以一定形式共享。</span></blockquote><div class="wolai-block wolai-text"><div><span class="inline-wrap">NUMA</span></div></div><blockquote class="wolai-block"><span class="inline-wrap">其访问时间随存储字的位置不同而变化。其共享存储器物理上是分布在所有处理机的本地存储器上。所有本地存储器的集合组成了全局地址空间，可被所有的处理机访问。处理机访问本地存储器是比较快的，但访问属于另一台处理机的远程存储器则比较慢，因为通过互连网络会产生附加时延。</span></blockquote></article><footer></footer></body></html>