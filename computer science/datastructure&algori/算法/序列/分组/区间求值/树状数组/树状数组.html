<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../../../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../../../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../../../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../../../../../css/wolai.css"/><title>æ ‘çŠ¶æ•°ç»„ - wolai ç¬”è®°</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div data-symbol="ğŸ™" class="icon"></div></div><div data-title="æ ‘çŠ¶æ•°ç»„" class="main-title"></div></div></header><article><div class="wolai-block wolai-text"><div><span class="inline-wrap">åœ¨è®²æ ‘çŠ¶æ•°ç»„å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸ªå‡½æ•°ã€‚</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><code>lowBit(x)</code></span><span class="inline-wrap">å‡½æ•°ï¼Œä¿ç•™</span><span class="inline-wrap"><code>x</code></span><span class="inline-wrap">äºŒè¿›åˆ¶æ ¼å¼ä¸‹ä½ä½çš„ç¬¬ä¸€ä¸ª</span><span class="inline-wrap"><code>1</code></span><span class="inline-wrap">ï¼Œå…¶å®ƒç½®ä¸º</span><span class="inline-wrap"><code>0</code></span><span class="inline-wrap">ã€‚</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">ä¾‹å¦‚</span><span class="inline-wrap"><code>lowBit(11) = 1</code></span><span class="inline-wrap">ï¼Œ</span><span class="inline-wrap"><code>11</code></span><span class="inline-wrap">è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ•°å°±æ˜¯ </span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1011</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">(1011)_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1011</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="inline-wrap">ï¼Œä¿ç•™ä½ä½ç¬¬ä¸€ä¸ª</span><span class="inline-wrap"><code>1</code></span><span class="inline-wrap">å¾—</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0001</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">(0001)_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0001</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span class="inline-wrap">ã€‚</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">int</span> <span class="token function">lowBit</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¯¹äºæœ‰ç¬¦å·æ•° -xå°±æ˜¯xå–åç„¶ååŠ 1</span>
<span class="token punctuation">}</span></pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">ç°åœ¨è¦ä½ è®¾è®¡ä¸€ç§æ•°æ®ç»“æ„ï¼Œåˆå§‹æ—¶ç»™ä½ ä¸€ä¸ªæ•°ç»„</span><span class="inline-wrap"><code>nums</code></span><span class="inline-wrap">ï¼Œè¦æ”¯æŒä¸¤ç§æ“ä½œï¼š</span></div></div><ol class="wolai-block"><li><div class="marker"></div><span class="inline-wrap">ä¿®æ”¹æ•°ç»„çš„æŸä¸ªå€¼(å•ç‚¹ä¿®æ”¹)</span></li><li><div class="marker"></div><span class="inline-wrap">æ±‚æ•°ç»„æŒ‡å®šåŒºé—´çš„å’Œ(åŒºé—´æ±‚å’Œ)</span></li></ol><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap">å¯¹äºæ™®é€šæ•°ç»„è€Œè¨€ï¼Œ</span><span class="inline-wrap"><b>å•ç‚¹ä¿®æ”¹</b></span><span class="inline-wrap">çš„æ—¶é—´å¤æ‚åº¦æ˜¯</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap">ï¼Œä½†</span><span class="inline-wrap"><b>åŒºé—´æ±‚å’Œ</b></span><span class="inline-wrap">çš„æ—¶é—´å¤æ‚åº¦æ˜¯</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></span><span class="inline-wrap">ã€‚</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨</span><span class="inline-wrap"><b>å‰ç¼€å’Œ</b></span><span class="inline-wrap">çš„æ–¹æ³•ç»´æŠ¤è¿™ä¸ªæ•°ç»„ï¼Œè¿™æ ·çš„è¯</span><span class="inline-wrap"><b>åŒºé—´æ±‚å’Œ</b></span><span class="inline-wrap">çš„æ—¶é—´å¤æ‚åº¦å°±é™åˆ°äº†</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mtext>ï»¿</mtext></mrow><annotation encoding="application/x-tex">O(1)ï»¿</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mord">ï»¿</span></span></span></span></span><span class="inline-wrap">ï¼Œä½†æ˜¯</span><span class="inline-wrap"><b>å•ç‚¹ä¿®æ”¹</b></span><span class="inline-wrap">ä¼šå½±å“åé¢æ‰€æœ‰çš„å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mtext>ï»¿</mtext></mrow><annotation encoding="application/x-tex">O(N)ï»¿</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mord">ï»¿</span></span></span></span></span><span class="inline-wrap">ã€‚</span></div></div><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap">ç¨‹åºæœ€åè·‘å¤šé•¿æ—¶é—´ï¼Œæ˜¯ç”±æœ€æ…¢çš„ä¸€ç¯å†³å®šçš„ï¼Œå› æ­¤ç°åœ¨æˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°è¿™æ ·ä¸€ç§æŠ˜ä¸­çš„æ–¹æ³•ï¼šæ— è®ºå•ç‚¹ä¿®æ”¹è¿˜æ˜¯åŒºé—´æŸ¥è¯¢ï¼Œå®ƒéƒ½èƒ½ä¸é‚£ä¹ˆæ…¢åœ°å®Œæˆã€‚</span></div></div><hr class="wolai-block"/><div class="wolai-block wolai-text"><div><span class="inline-wrap">å…³äºæ•°ç»„çš„ç»´æŠ¤ï¼Œæœ‰ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•ï¼šå¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„</span><span class="inline-wrap"><code>bit</code></span><span class="inline-wrap">ç»´æŠ¤è‹¥å¹²ä¸ªå°åŒºé—´(bit<span class="jill"></span>æ•°ç»„çš„æ¯ä¸ªå…ƒç´ è¡¨ç¤ºåŸæ•°ç»„ä¸€æ®µåŒºé—´çš„å’Œ)ï¼Œå•ç‚¹ä¿®æ”¹æ—¶ï¼Œ</span><span class="inline-wrap"><b>åªæ›´æ–°åŒ…å«è¿™ä¸€å…ƒç´ çš„åŒºé—´</b></span><span class="inline-wrap">ï¼›æ±‚å‰<span class="jill"></span>n<span class="jill"></span>é¡¹å’Œæ—¶ï¼Œ</span><span class="inline-wrap"><b>é€šè¿‡å°†åŒºé—´è¿›è¡Œç»„åˆï¼Œå¾—åˆ°ä»<span class="jill"></span>1<span class="jill"></span>åˆ°<span class="jill"></span>n<span class="jill"></span>çš„åŒºé—´ï¼Œç„¶åå¯¹æ‰€æœ‰ç”¨åˆ°çš„åŒºé—´æ±‚å’Œ</b></span><span class="inline-wrap">ã€‚</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">é—®é¢˜æ¥äº†ï¼Œ</span><span class="inline-wrap"><code>bit[i]</code></span><span class="inline-wrap">è¡¨ç¤ºåŸæ•°ç»„å“ªæ®µåŒºé—´çš„å’Œå‘¢?  æ ‘çŠ¶æ•°ç»„è·ŸåŸæ•°ç»„å­˜åœ¨ä»€ä¹ˆçš„å…³ç³»å‘¢?</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="çº¯æ–‡æœ¬" class="marker"></div><pre> <span class="token number">1.</span>bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">nums</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span>
 <span class="token number">2.</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> æ˜¯ bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span>ã€bit<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span>ã€bit<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token spread operator">...</span><span class="token punctuation">.</span> <span class="token property-access">çš„ä¸€éƒ¨åˆ†</span>

 æ ¹æ®ç¬¬<span class="token number">1</span>ç‚¹<span class="token punctuation">,</span>æˆ‘ä»¬èƒ½å¾—å‡º<span class="token operator">:</span>
 nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">nums</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">nums</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token spread operator">...</span> <span class="token operator">+</span> <span class="token function">nums</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
           <span class="token operator">=</span> bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> bit<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> bit<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token spread operator">...</span> <span class="token operator">+</span> bit<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

 æ ¹æ®ç¬¬<span class="token number">2</span>ç‚¹<span class="token punctuation">,</span>æˆ‘ä»¬èƒ½å¾—å‡º<span class="token operator">:</span>
 ä¿®æ”¹nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>æ—¶<span class="token punctuation">,</span> bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span>ã€bit<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span>ã€bit<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token spread operator">...</span> ä¹Ÿè¦è¿›è¡Œå¯¹åº”çš„ä¿®æ”¹

 ä¸ºä»€ä¹ˆæ˜¯bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">nums</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span><span class="token operator">?</span>
 å…¶å®<span class="token punctuation">,</span>ä½ æƒ³bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span>ä¹Ÿå¯ä»¥çš„<span class="token punctuation">,</span>åªæ˜¯è¿™æ ·bitå°±å˜æˆäº†å‰ç¼€å’Œ<span class="token punctuation">,</span>ä¹Ÿå°±æ˜¯åŒºé—´æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦<span class="token constant">O</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>å•ç‚¹ä¿®æ”¹æ—¶é—´å¤æ‚åº¦<span class="token constant">O</span><span class="token punctuation">(</span><span class="token constant">N</span><span class="token punctuation">)</span>
 æˆ–è€…<span class="token punctuation">,</span>ä½ æƒ³Bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">,</span>i<span class="token punctuation">]</span>ä¹Ÿå¯ä»¥çš„<span class="token punctuation">,</span>è¿™æ ·bitå°±è·ŸåŸæ•°ç»„æ²¡åŒºåˆ«äº†<span class="token punctuation">,</span>ä¹Ÿå°±æ˜¯åŒºé—´æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦<span class="token constant">O</span><span class="token punctuation">(</span><span class="token constant">N</span><span class="token punctuation">)</span><span class="token punctuation">,</span>å•ç‚¹ä¿®æ”¹æ—¶é—´å¤æ‚åº¦<span class="token constant">O</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
 æ‰€ä»¥<span class="token punctuation">,</span>bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span>ä»£è¡¨å“ªä¸€æ®µåŒºé—´<span class="token punctuation">,</span>å¯¹è¿™ä¸¤ç§æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å…·æœ‰å†³å®šæ€§çš„å½±å“
 bit<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">nums</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token function">lowBit</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span>i<span class="token punctuation">]</span> å°±æ˜¯ä¸€ç§å¹³è¡¡<span class="token punctuation">,</span>èƒ½è®©è¿™ä¸¤ç§æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½ç»´æŒåœ¨<span class="token constant">O</span><span class="token punctuation">(</span>logN<span class="token punctuation">)</span>
</pre></div></code-block><div class="wolai-block wolai-text"><div><span class="inline-wrap">ä¸ºä»€ä¹ˆ</span><span class="inline-wrap"><code>bit[i] = nums(i-lowBit(i),i]</code></span><span class="inline-wrap">èƒ½å…·æœ‰è¿™ç§é­”åŠ›?</span></div></div><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token doc-comment comment">/**
 * æ ‘çŠ¶æ•°ç»„çš„ç´¢å¼•æ˜¯ä»1å¼€å§‹çš„,æ‰€ä»¥è°ƒç”¨æ–¹è¦é€‚å½“çš„è°ƒæ•´ä¼ å‚
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> BIT <span class="token punctuation">{</span>

     <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bit<span class="token punctuation">;</span>

      <span class="token keyword">public</span> <span class="token function">BIT</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>bit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">add</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>


      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> idx<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> idx <span class="token operator">&lt;</span> bit<span class="token punctuation">.</span>length<span class="token punctuation">;</span> idx <span class="token operator">+=</span> <span class="token function">lowBit</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              bit<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">+=</span> val<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">preSum</span><span class="token punctuation">(</span><span class="token keyword">int</span> idx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> idx <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> idx <span class="token operator">-=</span> <span class="token function">lowBit</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              ans <span class="token operator">+=</span> bit<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rangeSum</span><span class="token punctuation">(</span><span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">preSum</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">preSum</span><span class="token punctuation">(</span>lo <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> idx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">rangeSum</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> idx<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> idx<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">add</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> val <span class="token operator">-</span> <span class="token function">get</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">lowBit</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> x <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">-</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span></pre></div></code-block><div class="wolai-block wolai-text"><div></div></div><div class="wolai-bookmark wolai-block"><a href="https://zhuanlan.zhihu.com/p/93795692">ç®—æ³•å­¦ä¹ ç¬”è®°(2) : æ ‘çŠ¶æ•°ç»„</a><div class="info-box"><div class="text-pane"><div data-title="ç®—æ³•å­¦ä¹ ç¬”è®°(2) : æ ‘çŠ¶æ•°ç»„"></div><div data-desc="æ ‘çŠ¶æ•°ç»„ï¼ˆ Binary Index Tree, BITï¼‰ä¹Ÿæ˜¯å¾ˆå¤šOIerå¿ƒä¸­æœ€ç®€æ´ä¼˜ç¾çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚æœ€ç®€å•çš„æ ‘çŠ¶æ•°ç»„æ”¯æŒä¸¤ç§æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸º O(\log n) ï¼šå•ç‚¹ä¿®æ”¹ï¼šæ›´æ”¹æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´ çš„å€¼åŒºé—´æŸ¥è¯¢ï¼šæŸ¥è¯¢ä¸€ä¸ªåŒºé—´å†…æ‰€æœ‰å…ƒç´ â€¦"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.a53ae37b.png&quot;)"></div><div data-hostname="zhuanlan.zhihu.com"></div></div></div><div class="preview-pane" style="background-image: url(https://pica.zhimg.com/v2-fbaeb49fdbad31a211fe37f068ca8bb0_720w.jpg?source=172ae18b)"></div></div></div><div class="wolai-bookmark wolai-block"><a href="https://halfrost.com/binary_indexed_tree/">èŠèŠæ ‘çŠ¶æ•°ç»„ Binary Indexed Tree</a><div class="info-box"><div class="text-pane"><div data-title="èŠèŠæ ‘çŠ¶æ•°ç»„ Binary Indexed Tree"></div><div data-desc="æ ‘çŠ¶æ•°ç»„æˆ–äºŒå‰ç´¢å¼•æ ‘ï¼ˆBinary Indexed Treeï¼‰ï¼Œåˆä»¥å…¶å‘æ˜è€…å‘½åä¸º Fenwick æ ‘ï¼Œæœ€æ—©ç”± Peter M. Fenwick äº 1994 å¹´ä»¥ A New Data Structure for Cumulative Frequency Tables ä¸ºé¢˜å‘è¡¨åœ¨ SOFTWARE PRACTICE AND EXPERIENCE ä¸Šã€‚å…¶åˆè¡·æ˜¯è§£å†³æ•°æ®å‹ç¼©é‡Œçš„ç´¯ç§¯é¢‘ç‡ï¼ˆCumula"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://halfrost.com/assets/images/apple-touch-icon-152x152.png?v=b322a5b340&quot;)"></div><div data-hostname="halfrost.com"></div></div></div><div class="preview-pane" style="background-image: url(https://img.halfrost.com/2021/04/Blog-99.png)"></div></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><details class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><a href="https://leetcode-cn.com/problems/range-sum-query-mutable/"><span>307. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„å¯ä¿®æ”¹</span></a></span></summary><code-block class="wolai-block"><div class="wolai-pre"><div data-lang="Java" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">NumArray</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BIT</span> bit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">NumArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">BIT</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nums <span class="token operator">=</span> nums<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bit<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> val <span class="token operator">-</span> nums<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        nums<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sumRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bit<span class="token punctuation">.</span><span class="token function">rangeSum</span><span class="token punctuation">(</span>left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span></pre></div></code-block></details></article><footer></footer></body></html>