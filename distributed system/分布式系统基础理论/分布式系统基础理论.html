<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>分布式系统基础理论 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div data-symbol="🏆" class="icon"></div></div><div data-title="分布式系统基础理论" class="main-title"></div></div></header><article><div class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h2 class="wolai-block"><span class="inline-wrap">CAP<span class="jill"></span>理论</span></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap">CAP<span class="jill"></span>理论：一个分布式系统不可能同时满足一致性（C：Consistency）、可用性（A： Availability）、分区容忍性（P：Partition tolerance）这三个基本需求，最多只能同时满足其中的两项。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>一致性</b></span><span class="inline-wrap">：集群中节点的数据保持一致，可以随机往一个节点读/写数据</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>可用性</b></span><span class="inline-wrap">：即使集群中部分节点出现故障，服务也必须处于可用的状态，对于用户的每个操作请求总是能够在有限的时间内返回结果</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>分区容忍性</b></span><span class="inline-wrap">：即使集群中部分节点无法通信（节点都处于运行状态），系统也能继续提供服务</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>ps:当网络由于发生异常情况，导致分布式系统中部分节点之间的网络延时不断增大，最终导致组成分布式系统的所有节点中，只有部分节点之间能够正常通信，而另一些节点则不能----我们将这个现象称为网络分区</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">其实对于分布式系统，分区容错性是最基本的要求，因为分布式系统必然会出现网络问题的，必然会出现部分节点之间无法通信的情况，在这种情况下系统也必须要提供服务，所以分区容错性是必须的，我们能做的就是在一致性和可用性之间达到平衡。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">假设现在有节点<span class="jill"></span>X<span class="jill"></span>和<span class="jill"></span>Y<span class="jill"></span>组成一个集群，因为网络问题<span class="jill"></span>X<span class="jill"></span>和<span class="jill"></span>Y<span class="jill"></span>无法通信，它们无法对数据进行同步，这种情况下:</span></div></div><ul class="wolai-block"><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">即使数据无法同步也允许继续操作数据，必然导致数据不一致，也就是放弃了一致性</span></li><li><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">因为数据无法同步禁止操作数据，那么就导致服务不可用，也就是放弃了可用性</span></li></ul><h2 class="wolai-block"><span class="inline-wrap">BASE<span class="jill"></span>理论</span></h2><div class="wolai-block wolai-text"><div><span class="inline-wrap">BASE<span class="jill"></span>是</span><span class="inline-wrap"><code>Basically Available</code></span><span class="inline-wrap"> (基本可用)、</span><span class="inline-wrap"><code>Soft state</code></span><span class="inline-wrap">(软状态)、</span><span class="inline-wrap"><code>Eventually consistent</code></span><span class="inline-wrap"> (最终一致性) 三个短语的简写. BASE<span class="jill"></span>是对<span class="jill"></span>CAP<span class="jill"></span>中一致性和可用性权衡的结果，其核心思想是即使无法做到强一致性，但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>基本可用</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">基本可用是指分布式系统在出现不可预知的故障时，允许损失部分可用性，例如：</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">延长响应时间：比如原来的的查询只需要 0.5 秒，现在延长到 1～ 2 秒；</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">服务降级：比如在商品秒杀时，部分用户会被引导到一个降级页面。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>软状态</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">软状态也称为弱状态，是指允许系统中的数据存在中间状态，并认为该中间状态的存在不会影响系统整体的可用性，即允许不同节点间的数据同步存在延时。</span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap"><b>最终一致性</b></span></div></div><div class="wolai-block wolai-text"><div><span class="inline-wrap">最终一致性强调的是系统中所有的数据副本，在经过一段时间的同步后，最终需要达到一致的状态。</span></div></div><div class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>